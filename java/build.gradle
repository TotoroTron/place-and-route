plugins {
    id 'java'
    id 'application'
    id 'eclipse'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation files("${System.getenv('RAPIDWRIGHT_PATH')}/bin")
    implementation fileTree(dir: "${System.getenv('RAPIDWRIGHT_PATH')}/jars", include: ['*.jar'])
}

apply plugin: 'java'
apply plugin: 'eclipse'
eclipse {
    classpath {
        file {
            whenMerged {
                def source = entries.find { it.path == 'src/main/java' }
                source.entryAttributes['ignore_optional_problems'] = true
            }
        }
    }
}


tasks.withType(JavaCompile) {
    options.forkOptions.jvmArgs = ["-Xmx32736m"]
}

application {
    mainClass = 'placer.Main'
}

task generateClasspath {
    doLast {
        def classpath = configurations.compileClasspath.asPath
        def file = file("classpath.txt")
        file.text = classpath
    }
}
